Redis 是一个内存数据库，数据断电即丢失，所以为了将数据持久化，有以下几种方式：

# 1 RDB

可以手动执行 SAVE 或者 BGSAVE 的命令触发 RDB 持久化。但是生产环境不会这么做。这里只讨论自动触发的情况。redis 的持久化策略可以在配置文件 redis.conf 中设置，通过类似 save 300 10 这样的指令来配置，意味着如果在 300 秒内至少有 10 个键被改变，则自动触发 RDB 持久化。，每一次RDB备份都会将整个Redis服务器在某一时刻的状态保存下来，RDB文件是经过压缩的二进制格式

# 2 AOF

AOF同步策略由配置文件 redis.conf 中的 appendfsync 选项控制，该选项可以设置为 always（每次写操作后立即同步）、everysec（每秒同步一次，是默认和推荐的选项）、或 no（交由操作系统决定何时同步）。

AOF 重写是一种压缩机制，通过这种机制可以将 AOF 文件压缩。AOF 重写也是使用子进程的方式。

不管是 RDB 还是 AOF，都是在事件循环中判断是否需要进行的。
